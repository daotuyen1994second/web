"use strict";(self["webpackChunkmedicine"]=self["webpackChunkmedicine"]||[]).push([[664],{9664:function(e,t,l){l.r(t),l.d(t,{default:function(){return N}});var a=l(3396),r=l(7139);const n={style:{"text-align":"left"}},o={class:"Form tra cứu danh sách tai khoan user"},s=(0,a._)("br",null,null,-1),i=(0,a._)("br",null,null,-1),u=(0,a._)("br",null,null,-1),m={m:"4"},d={m:"t-0 b-2",style:{"font-weight":"bold"}},h={key:0,m:"4"},c=(0,a._)("br",null,null,-1),p={class:"Dialog"},g={class:"dialog-footer"};function f(e,t,l,f,w,b){const _=(0,a.up)("el-text"),y=(0,a.up)("el-divider"),z=(0,a.up)("Plus"),N=(0,a.up)("el-icon"),S=(0,a.up)("el-button"),W=(0,a.up)("el-col"),A=(0,a.up)("el-row"),C=(0,a.up)("el-input"),k=(0,a.up)("el-table-column"),$=(0,a.up)("Delete"),D=(0,a.up)("el-popconfirm"),U=(0,a.up)("Edit"),F=(0,a.up)("el-table"),E=(0,a.up)("el-pagination"),v=(0,a.up)("el-form-item"),L=(0,a.up)("el-option"),V=(0,a.up)("el-select"),x=(0,a.up)("el-form"),M=(0,a.up)("el-dialog"),T=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("h3",n,[(0,a.Wm)(_,{size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.$t("Quản lý tài khoản người dùng:")),1)])),_:1})]),(0,a.Wm)(y),(0,a.Wm)(A,{gutter:24,justify:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{md:5},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{size:"large",type:"success",onClick:t[0]||(t[0]=e=>b.showAddNew()),plain:""},{default:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z)])),_:1}),(0,a.Uk)("  "+(0,r.zw)(e.$t("Thêm tài khoản")),1)])),_:1})])),_:1})])),_:1}),(0,a._)("div",o,[(0,a.Wm)(A,{gutter:24,justify:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{md:4},{default:(0,a.w5)((()=>[s,(0,a.Wm)(C,{modelValue:w.search,"onUpdate:modelValue":t[1]||(t[1]=e=>w.search=e),placeholder:e.$t("Mã thẻ/Tên"),clearable:""},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(W,{md:3},{default:(0,a.w5)((()=>[i,(0,a.Wm)(S,{onClick:b.SearchData},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.$t("Tìm kiếm")),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),u,(0,a.wy)(((0,a.wg)(),(0,a.j4)(F,{data:w.tableData,key:w.tableKey,"element-loading-text":e.$t("Đang tải"),"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{type:"index",label:e.$t("Số thứ tự"),sortable:"",width:"100"},null,8,["label"]),(0,a.Wm)(k,{prop:"F_EMPNO",label:e.$t("Mã thẻ"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{prop:"F_EMPNAME",label:e.$t("Họ tên"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{prop:"F_EMPMOBILE",label:e.$t("Email"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{prop:"F_DEPT",label:e.$t("Mã bộ phận"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{prop:"F_DEPTNAME",label:e.$t("Tên bộ phận"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{type:"expand",label:e.$t("Danh sách nhà xưởng/phòng y tế có quyền"),width:"300"},{default:(0,a.w5)((t=>[(0,a._)("div",m,[(0,a._)("p",d,(0,r.zw)(e.$t("Danh sách nhà xưởng/phòng y tế có quyền"))+":",1)]),null!=t.row.F_FACTORYZONE?((0,a.wg)(),(0,a.iD)("div",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.row.F_FACTORYZONE.split(";"),(e=>((0,a.wg)(),(0,a.iD)("p",{m:"t-0 b-2",key:e},(0,r.zw)(e),1)))),128))])):(0,a.kq)("",!0)])),_:1},8,["label"]),(0,a.Wm)(k,{prop:"F_ROLE",label:e.$t("Quyền"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{prop:"F_SYSDATE",label:e.$t("Ngày cập nhật"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{prop:"F_SYSID",label:e.$t("Người cập nhật"),sortable:""},null,8,["label"]),(0,a.Wm)(k,{fixed:"right",label:e.$t("Hành động"),width:"200"},{default:(0,a.w5)((t=>[(0,a.Wm)(D,{"confirm-button-text":e.$t("Có"),"cancel-button-text":e.$t("Không"),icon:e.InfoFilled,"icon-color":"#626AEF",title:e.$t("Bạn có chắc chắn muốn thao tác?"),onConfirm:e=>b.DeleteUserAccount(t.row.F_EMPNO)},{reference:(0,a.w5)((()=>[(0,a.Wm)(S,{size:"small",type:"danger",plain:""},{default:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)($)])),_:1}),(0,a.Uk)("   "+(0,r.zw)(e.$t("Xóa")),1)])),_:1})])),_:2},1032,["confirm-button-text","cancel-button-text","icon","title","onConfirm"]),(0,a.Wm)(S,{size:"small",type:"success",plain:"",onClick:e=>b.ShowUpdateUserAccount(t.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(U)])),_:1}),(0,a.Uk)("   "+(0,r.zw)(e.$t("Sửa")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data","element-loading-text"])),[[T,w.Loading]]),c,(0,a.Wm)(E,{onSizeChange:b.handleSizeChange,onCurrentChange:b.handleCurrentChange,"current-page":w.currentPage,"page-sizes":[10,20,30,40],"page-size":w.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:w.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),(0,a._)("div",p,[(0,a.Wm)(M,{class:"Form tao hoac edit tai khoan",modelValue:w.isShowSignDialog,"onUpdate:modelValue":t[8]||(t[8]=e=>w.isShowSignDialog=e),title:w.frm.isAddNew?e.$t("Tạo tài khoản"):e.$t("Cập nhật tài khoản"),width:"500"},{footer:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(S,{plain:"",type:"primary",onClick:t[6]||(t[6]=e=>b.Save())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.$t("Lưu")),1)])),_:1}),(0,a.Wm)(S,{plain:"",type:"warning",onClick:t[7]||(t[7]=e=>w.isShowSignDialog=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.$t("Hủy bỏ")),1)])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{label:e.$t("Mã thẻ"),rules:[{required:!0}]},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:w.frm.empNo,"onUpdate:modelValue":t[2]||(t[2]=e=>w.frm.empNo=e),placeholder:e.$t("Nhập vào mã thẻ"),onChange:t[3]||(t[3]=e=>b.ChangeEmpNo()),readonly:0==w.frm.isAddNew},null,8,["modelValue","placeholder","readonly"])])),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Họ và tên:")},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:w.frm.empName,"onUpdate:modelValue":t[4]||(t[4]=e=>w.frm.empName=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Khu vực xưởng/Phòng y tế:"),rules:[{required:!0}]},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{modelValue:w.frm.factoryLs,"onUpdate:modelValue":t[5]||(t[5]=e=>w.frm.factoryLs=e),multiple:"",placeholder:e.$t("Chọn khu vực có quyền"),style:{width:"240px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.factoryLsTotal,(e=>((0,a.wg)(),(0,a.j4)(L,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["modelValue","title"])])],64)}var w=l(1822),b=l(7178),_={name:"ManageAccountUser",data(){return{frm:{empNo:"",empName:"",factoryLs:[],isAddNew:!1},isShowSignDialog:!1,factoryLsTotal:[],Loading:!1,tableData:[],tableKey:0,search:"",currentPage:1,pageSize:10,total:0}},methods:{ShowUpdateUserAccount(e){this.resetFrm(),this.frm.factoryLs=e.F_FACTORYZONE.split(";"),this.frm.empNo=e.F_EMPNO,this.frm.empName=e.F_EMPNAME,this.frm.isAddNew=!1,this.isShowSignDialog=!0},DeleteUserAccount(e){w.Z.DeleteUserAccount({empNo:e},(e=>{"error"==e.data.status?b.z8.error(e?.data?.message):(b.z8.success(e?.data?.message),this.SearchData())}),(e=>{b.z8.error(e.message)}))},ChangeEmpNo(){this.frm.empName="",this.frm.empNo?.trim()?w.Z.GetEmpInforFromSV({empNo:this.frm.empNo},(e=>{"error"==e.data.status?b.z8.error(e?.data?.message):e.data.data&&(this.frm.empName=e.data.data.USER_NAME)}),(e=>{b.z8.error(e.message)})):b.z8.error(this.$t("Vui lòng nhập vào mã thẻ"))},Save(){this.frm.empNo?.trim()?null==this.frm.factoryLs||this.frm.factoryLs.length<=0?b.z8.error(this.$t("Vui lòng chọn khu vực xưởng/phòng y tế")):w.Z.AddOrUpdateAccountUser(this.frm,(e=>{"error"==e.data.status?b.z8.error(e?.data?.message):(b.z8.success(e?.data?.message),this.resetFrm(),this.SearchData())}),(e=>{b.z8.error(e.message)})):b.z8.error(this.$t("Vui lòng nhập vào mã thẻ"))},showAddNew(){this.resetFrm(),this.frm.isAddNew=!0,this.isShowSignDialog=!0},resetFrm(){this.frm.isAddNew=!1,this.isShowSignDialog=!1,this.frm.empNo="",this.frm.empName="",this.frm.factoryLs=[]},GetAccountInfor(){this.factoryLsTotal=[],w.Z.CheckSession((e=>{"error"==e.data.status?b.z8.error(e?.data?.message):this.factoryLsTotal=e.data.data.F_FACTORYZONE_LS}),(e=>{b.z8.error(e.message)}))},GetAllAccountUser(){this.tableData=[],this.Loading=!0,w.Z.GetAllAccountUser({search:this.search,page:this.currentPage,pageSize:this.pageSize},(e=>{if(this.Loading=!1,"error"==e.data.status)b.z8.error(e?.data?.message);else{let t=e.data.data;this.tableData=t.items,this.total=t.totalCount,this.tableKey+=1}}),(e=>{this.Loading=!1,b.z8.error(e.message)}))},SearchData(){this.GetAllAccountUser()},handleSizeChange(e){this.pageSize=e,this.GetAllAccountUser()},handleCurrentChange(e){this.currentPage=e,this.GetAllAccountUser()}},created(){this.GetAccountInfor(),this.GetAllAccountUser()}},y=l(89);const z=(0,y.Z)(_,[["render",f]]);var N=z}}]);