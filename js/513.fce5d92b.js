"use strict";(self["webpackChunkmedicine"]=self["webpackChunkmedicine"]||[]).push([[513],{9513:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var n=a(3396),l=a(7139);const o={key:1,class:"imported-good-frm"},i={style:{"text-align":"left"}};function r(e,t,a,r,m,d){const u=(0,n.up)("el-option"),c=(0,n.up)("el-select"),s=(0,n.up)("el-form-item"),f=(0,n.up)("ArrowRightBold"),h=(0,n.up)("el-icon"),p=(0,n.up)("el-button"),y=(0,n.up)("DArrowRight"),g=(0,n.up)("el-form"),M=(0,n.up)("Back"),w=(0,n.up)("ImportedGoodsManual"),_=(0,n.up)("ImportedGoodsMore");return m.isShowSelectFactoryZone?((0,n.wg)(),(0,n.j4)(g,{key:0,"label-width":"auto",style:{"max-width":"500px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:e.$t("Khu xưởng/Phòng y tế")},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:m.currentFactoryZone,"onUpdate:modelValue":t[0]||(t[0]=e=>m.currentFactoryZone=e),placeholder:e.$t("Vui lòng chọn khu xưởng/Phòng y tế"),clearable:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(m.FactoryZoneLs,(e=>((0,n.wg)(),(0,n.j4)(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(p,{size:"large",type:"success",plain:"",onClick:t[1]||(t[1]=e=>d.ImportedGoodsManual())},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f)])),_:1}),(0,n.Uk)("  "+(0,l.zw)(e.$t("Nhập hàng thủ công")),1)])),_:1}),(0,n.Uk)("   "),(0,n.Wm)(p,{size:"large",type:"primary",plain:"",onClick:t[2]||(t[2]=e=>d.ImportedGoodsMore())},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y)])),_:1}),(0,n.Uk)("  "+(0,l.zw)(e.$t("Nhập hàng hàng loạt")),1)])),_:1})])])),_:1})])),_:1})):((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",i,[(0,n.Wm)(p,{style:{border:"none"},onClick:t[3]||(t[3]=e=>d.ResetSome())},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(M)])),_:1}),(0,n.Uk)("   "+(0,l.zw)(e.$t("Trở lại")),1)])),_:1})]),m.isShowImportedGoodsManual?((0,n.wg)(),(0,n.j4)(w,{key:0,factoryZone:m.currentFactoryZone},null,8,["factoryZone"])):((0,n.wg)(),(0,n.j4)(_,{key:1,factoryZone:m.currentFactoryZone},null,8,["factoryZone"]))]))}a(560);var m=a(7178);const d=e=>((0,n.dD)("data-v-514ccc6e"),e=e(),(0,n.Cn)(),e),u={class:"title"},c={style:{"font-size":"small",color:"red"}},s=d((()=>(0,n._)("br",null,null,-1)));function f(e,t,a,o,i,r){const m=(0,n.up)("el-divider"),d=(0,n.up)("el-input"),f=(0,n.up)("el-form-item"),h=(0,n.up)("el-col"),p=(0,n.up)("el-row"),y=(0,n.up)("el-input-number"),g=(0,n.up)("el-date-picker"),M=(0,n.up)("Position"),w=(0,n.up)("el-icon"),_=(0,n.up)("el-button"),W=(0,n.up)("el-popconfirm");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("h3",u,(0,l.zw)(e.$t("Nhập hàng thủ công"))+":",1),(0,n.Wm)(m),(0,n.Wm)(p,{gutter:24,justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{sm:20},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{gutter:24},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Khu xưởng/Phòng y tế")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.factoryZonee,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formMain.factoryZonee=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1}),(0,n.Wm)(p,{gutter:24},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Số hiệu hàng nhập"),rules:[{required:!0}]},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:t[1]||(t[1]=e=>r.GetMedicineInfor()),modelValue:i.formMain.medicineID,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formMain.medicineID=e),placeholder:e.$t("Nhập vào số hiệu hàng nhập"),clearable:""},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Tên hàng nhập")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.medicineName,"onUpdate:modelValue":t[3]||(t[3]=e=>i.formMain.medicineName=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Ngày nhập hệ thống")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.systemInputDate,"onUpdate:modelValue":t[4]||(t[4]=e=>i.formMain.systemInputDate=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1}),(0,n.Wm)(p,{gutter:24},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Số lượng nhập"),rules:[{required:!0}]},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{onChange:t[5]||(t[5]=e=>r.GetTotalInOutInforOfAMedicine()),modelValue:i.formMain.inQty,"onUpdate:modelValue":t[6]||(t[6]=e=>i.formMain.inQty=e),placeholder:e.$t("Nhập vào số lượng nhập"),clearable:"",min:0,max:1e9,precision:0,"value-on-clear":"min"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Số lượng tồn")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.totalQty,"onUpdate:modelValue":t[7]||(t[7]=e=>i.formMain.totalQty=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),(0,n._)("label",c,(0,l.zw)(e.$t("Số lượng tồn = Số lượng tồn cũ + Số lượng nhập mới")),1)])),_:1}),(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Ngày nhập thực tế"),rules:[{required:!0}]},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{modelValue:i.formMain.realInputDate,"onUpdate:modelValue":t[8]||(t[8]=e=>i.formMain.realInputDate=e),clearable:"",type:"date",format:"YYYY/MM/DD","value-format":"YYYY/MM/DD",placeholder:e.$t("Chọn ngày nhập thực tế")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1}),s,(0,n.Wm)(p,{gutter:24},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Hạn sử dụng"),rules:[{required:!0}]},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{onBlur:t[9]||(t[9]=e=>r.OnchangeExpiredDate()),modelValue:i.formMain.medicineExpiredDate,"onUpdate:modelValue":t[10]||(t[10]=e=>i.formMain.medicineExpiredDate=e),clearable:"",type:"date",format:"YYYY/MM/DD","value-format":"YYYY/MM/DD",placeholder:e.$t("Chọn hạn sử dụng")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Đầu đơn mua")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.buyDocNum,"onUpdate:modelValue":t[11]||(t[11]=e=>i.formMain.buyDocNum=e),clearable:"",placeholder:e.$t("Nhập vào đầu đơn mua")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,n.Wm)(h,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{label:e.$t("Quy cách")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.medicineObjUnit,"onUpdate:modelValue":t[12]||(t[12]=e=>i.formMain.medicineObjUnit=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1}),(0,n.Wm)(p,{class:"row-bg",justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{span:2},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(W,{"confirm-button-text":e.$t("Có"),"cancel-button-text":e.$t("Không"),icon:e.InfoFilled,"icon-color":"#626AEF",title:e.$t("Bạn có chắc chắn muốn thao tác?"),onConfirm:t[13]||(t[13]=e=>r.ImportToWHByNormalType()),onCancel:e.cancelEvent},{reference:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"primary",size:"large",plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(M)])),_:1}),(0,n.Uk)("   "+(0,l.zw)(e.$t("Nhập kho")),1)])),_:1})])),_:1},8,["confirm-button-text","cancel-button-text","icon","title","onCancel"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}var h=a(1822),p={name:"ImportedGoodsManual",data(){return{formMain:{medicineID:"",medicineName:"",medicineNameVi:"",medicineNameEn:"",systemInputDate:"",realInputDate:"",inQty:0,totalQty:"",medicineExpiredDate:"",buyDocNum:"",medicineObjUnit:"",medicineObjUnitVi:"",medicineObjUnitEn:"",factoryZonee:"",inputType:""}}},props:{factoryZone:String},methods:{inInt(){this.formMain.factoryZonee=this.factoryZone},ResetView(){this.formMain.medicineNameVi="",this.formMain.medicineNameEn="",this.formMain.medicineName="",this.formMain.medicineObjUnitVi="",this.formMain.medicineObjUnitEn="",this.formMain.medicineObjUnit="",this.formMain.systemInputDate="",this.formMain.totalQty="",this.formMain.realInputDate="",this.formMain.medicineExpiredDate="",this.formMain.buyDocNum="",this.formMain.inQty=0},ImportToWHByNormalType(){h.Z.ImportGoodsToWareHouseByNormalType(this.formMain,(e=>{"success"==e?.data?.status?((0,m.z8)({message:e.data.message,type:"success"}),this.formMain.medicineID="",this.ResetView()):(0,m.z8)({message:e.data.message,type:"error",dangerouslyUseHTMLString:!0,duration:5e3})}),(e=>{m.z8.error(e.message)}))},OnchangeExpiredDate(){this.formMain.totalQty=""},GetMedicineInfor(){this.ResetView(),this.formMain.medicineID&&h.Z.GetMedicineInfor({medicineID:this.formMain.medicineID},(e=>{if(e?.data?.data){let t=e?.data?.data;this.formMain.medicineNameVi=t.F_MEDICINE_NAME_VI,this.formMain.medicineNameEn=t.F_MEDICINE_NAME_EN,this.formMain.medicineName=this.formMain.medicineNameVi+"/"+this.formMain.medicineNameEn,this.formMain.medicineObjUnitVi=t.F_MEDICINE_OBJ_UNIT_VI,this.formMain.medicineObjUnitEn=t.F_MEDICINE_OBJ_UNIT_EN,this.formMain.medicineObjUnit=t.F_MEDICINE_OBJ_UNIT_VI+"/"+t.F_MEDICINE_OBJ_UNIT_EN,this.formMain.systemInputDate=t.F_SYSDATE1}}),(e=>{m.z8.error(e.message)}))},GetTotalInOutInforOfAMedicine(){this.formMain.totalQty="",this.formMain.medicineExpiredDate?0==isNaN(this.formMain.inQty)&&0!=parseInt(this.formMain.inQty)&&this.formMain.medicineID&&this.formMain.medicineExpiredDate&&this.formMain.factoryZonee&&h.Z.GetTotalInOutInforOfAMedicine({medicineId:this.formMain.medicineID,medicineExpiredDate:this.formMain.medicineExpiredDate,factoryZone:this.formMain.factoryZonee},(e=>{"success"==e?.data?.status?e?.data?.data?0==isNaN(e?.data?.data?.F_TOTAL_QTY)&&0==isNaN(this.formMain.inQty)&&(this.formMain.totalQty=(parseInt(this.formMain.inQty)+parseInt(e?.data?.data?.F_TOTAL_QTY)).toString()):this.formMain.totalQty=parseInt(this.formMain.inQty).toString():m.z8.error(e?.data?.message)}),(e=>{m.z8.error(e.message)})):m.z8.error(this.$t("Vui lòng chọn hạn sử dụng trước"))}},mounted(){this.inInt()}},y=a(89);const g=(0,y.Z)(p,[["render",f],["__scopeId","data-v-514ccc6e"]]);var M=g;const w=e=>((0,n.dD)("data-v-c79fdc64"),e=e(),(0,n.Cn)(),e),_={class:"title"},W={class:"el-upload__tip",style:{color:"red"}},I=w((()=>(0,n._)("br",null,null,-1))),b=w((()=>(0,n._)("br",null,null,-1)));function D(e,t,a,o,i,r){const m=(0,n.up)("el-divider"),d=(0,n.up)("el-input"),u=(0,n.up)("el-form-item"),c=(0,n.up)("el-col"),s=(0,n.up)("el-row"),f=(0,n.up)("Folder"),h=(0,n.up)("el-icon"),p=(0,n.up)("el-button"),y=(0,n.up)("Upload"),g=(0,n.up)("el-popconfirm"),M=(0,n.up)("el-upload"),w=(0,n.up)("Download");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("h3",_,(0,l.zw)(e.$t("Nhập hàng hàng loạt"))+":",1),(0,n.Wm)(m),(0,n.Wm)(s,{gutter:24,justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{sm:20},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{gutter:24},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{md:8},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{label:e.$t("Khu xưởng/Phòng y tế")},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:i.formMain.factoryZonee,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formMain.factoryZonee=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1}),(0,n.Wm)(s,{gutter:24},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{lg:10},{default:(0,n.w5)((()=>[(0,n.Wm)(M,{ref:"uploadRef",class:"upload-demo",limit:1,"on-change":r.handleChangeFile,"on-remove":r.handleRemoveFile,"auto-upload":!1},{trigger:(0,n.w5)((()=>[(0,n.Wm)(p,{type:"primary",size:"large",plain:"",style:{"margin-bottom":"10px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f)])),_:1}),(0,n.Uk)("   "+(0,l.zw)(e.$t("Chọn file")),1)])),_:1})])),tip:(0,n.w5)((()=>[(0,n._)("div",W,(0,l.zw)(e.$t("File excel có định dạng .xls/xlsx nhỏ hơn 10mb")),1)])),default:(0,n.w5)((()=>[(0,n.Uk)("   "),(0,n.Wm)(g,{"confirm-button-text":e.$t("Có"),"cancel-button-text":e.$t("Không"),icon:e.InfoFilled,"icon-color":"#626AEF",title:e.$t("Bạn có chắc chắn muốn thao tác?"),onConfirm:t[1]||(t[1]=e=>r.ImportToWHByNormalType()),onCancel:e.cancelEvent},{reference:(0,n.w5)((()=>[(0,n.Wm)(p,{style:{"margin-top":"-6px"},type:"warning",size:"large",plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y)])),_:1}),(0,n.Uk)("   "+(0,l.zw)(e.$t("Tải lên danh sách")),1)])),_:1})])),_:1},8,["confirm-button-text","cancel-button-text","icon","title","onCancel"])])),_:1},8,["on-change","on-remove"])])),_:1}),I,(0,n.Wm)(c,{lg:4},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{type:"success",size:"large",style:{"text-decoration":"none"},href:r.getSampleFile,tag:"a",rel:"noopener noreferrer",plain:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w)])),_:1}),(0,n.Uk)("   "+(0,l.zw)(e.$t("Tải xuống form mẫu")),1)])),_:1},8,["href"])])),_:1})])),_:1}),b])),_:1})])),_:1})],64)}var N=a(6e3),V={name:"ImportedGoodsMore",data(){return{formMain:{factoryZonee:"",fileUpload:null}}},props:{factoryZone:String},methods:{Test(){console.log(this.$refs.uploadRef)},handleRemoveFile(e){console.log(e),this.formMain.fileUpload=null},handleChangeFile(e){this.formMain.fileUpload=e},ImportToWHByNormalType(){try{if(!this.formMain.fileUpload?.raw)return void m.z8.error(this.$t("Vui lòng chọn file trước tiên"));if("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=this.formMain.fileUpload.raw.type&&"application/vnd.ms-excel"!=this.formMain.fileUpload.raw.type)return void m.z8.error(this.$t("Vui lòng chọn file excel với định dạng xls/xlsx"));if(console.log(""),this.formMain.fileUpload.raw.size>10485760)return void m.z8.error(this.$t("Kích thước file phải nhỏ hơn 10 mb"));var e=new FormData;e.append("factoryZonee",this.formMain.factoryZonee),e.append("file",this.formMain.fileUpload.raw),h.Z.ImportNormalType(e,(e=>{e?.data&&("success"==e?.data?.status?(N.T.alert(`<h3 style="color:green"> ${this.$t("Danh sách tải lên thành công:")} </h3>\n                                     <div style="background-color:green; color:white"> ${e?.data?.data.successLs} </div>\n                                     <h3 style="color:red"> ${this.$t("Danh sách tải lên thất bại:")} </h3>\n                                     <div style="background-color:red; color:white"> ${e?.data?.data.errorLs} </div>\n                                    `,this.$t("Thông báo"),{dangerouslyUseHTMLString:!0,showClose:!1}),this.formMain.fileUpload=null):m.z8.error(e?.data?.message))}),(e=>{m.z8.error(e.message)}))}catch(t){console.log(t)}finally{this.$refs.uploadRef?.clearFiles()}}},computed:{getSampleFile(){return h.Z.DownloadImportNormalSampleFile()}},mounted(){this.formMain.factoryZonee=this.factoryZone}};const Z=(0,y.Z)(V,[["render",D],["__scopeId","data-v-c79fdc64"]]);var $=Z,U={name:"ImportedGoods",components:{ImportedGoodsManual:M,ImportedGoodsMore:$},data(){return{currentFactoryZone:"",FactoryZoneLs:[],isShowImportedGoodsManual:!1,isShowSelectFactoryZone:!0}},methods:{GetFactoryZone(){this.FactoryZoneLs=[],h.Z.GetFactoryZone((e=>{e.data.data&&e.data.data.forEach((e=>{this.FactoryZoneLs.push({label:e.F_DATA2,value:e.F_DATA2})}))}),(e=>{m.z8.error(e.message)}))},ImportedGoodsManual(){this.currentFactoryZone?(this.isShowSelectFactoryZone=!1,this.isShowImportedGoodsManual=!0):m.z8.error(this.$t("Vui lòng chọn nhà xưởng đầu tiên"))},ImportedGoodsMore(){this.currentFactoryZone?(this.isShowSelectFactoryZone=!1,this.isShowImportedGoodsManual=!1):m.z8.error(this.$t("Vui lòng chọn nhà xưởng đầu tiên"))},ResetSome(){this.isShowImportedGoodsManual=!1,this.isShowSelectFactoryZone=!0,this.currentFactoryZone=""}},mounted(){this.GetFactoryZone()}};const F=(0,y.Z)(U,[["render",r]]);var v=F}}]);
//# sourceMappingURL=513.fce5d92b.js.map